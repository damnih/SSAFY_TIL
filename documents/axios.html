<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    const result = axios({
      method: 'get',
      url: 'https://api.thecatapi.com/v1/images/search'
      // https://cdn2.thecatapi.com/images/coi.jpg
    })
    // axios 프로미스 객체를 반환 
    console.log(result)

    result
      .then((response) => {
        console.log('then 메서드 실행')
      // 첫번째 then의 콜백함수에서는 
      // 응답 데이터에서 img 주소가 어디있는지까지만 찾기 

      // result.then((여기에 인자가 필요함=then 함수의 인자인거임) => {
      //   console.log('then 메서드 실행')
      // })
      // 첫번째 then 메서드의 인자는 서버로부터 받은 응답 객체가 전달됨
      // 응답 객체니깐 response라고 하자 
      // 원래 json 은 문자열임
      // 근데 자동으로 자스의 객체 형식으로 반환해준거임 
      console.log(response)
      console.log(typeof response)
      console.log(response.data)
      console.log(response.data[0])
      const catObject = response.data[0]
      // console.log(response.data[0].url)
      // console.log(response)
      return catObject
    })
    // 두번째 then부터의 콜백함수에서는 이전 then의 콜백함수의 반환값이 인자로 들어옴 
      .then((catObject) => {
        // 여기서 인자로 들어가는 것, 이 매개변수의 이름, 
        // 이전 then 함수의 리턴값과 같아야만 할까?
        // 답은, 달라도 된다 
        // 언어로 지정을 해주는 게 아니라 그냥 then함수의 특징 자체가 그렇게 들어가는 거구나!!!! 
        // 아 이름은 그냥 내가 명시도를 높이기 위해 일치시켜주는거고 
        // 변수의 이름 자체는 걍 
        // 그 테리토리에서만 사용되는 매개변수인거라 
        // 이름이 어찌되든 상관 없는 거야 

        // 두번째 then 의 콜백함수에서는 
        // 첫번째 then의 콜백함수에서 받은 결과에서 최종적으로 
        // 이미지 주소를 추출 

        // 그냥 내가 임의로 이렇게 단계를 나눈 거임 
        // then 함수가 하는 영역을 나눠준거임

        console.log(catObject)
        console.log(catObject.url)
        // const catObject

      })
      .catch((error) => {
        console.log(error)


      })
      // catch 메서드는 상단의 then 에서 에러가 발생했을 때 자동 호출됨 
      // catch도 then 과 마찬가지로 콜백함수를 인자로 받음 
      // 모두 다 함수를 받음 
      // catch의 콜백함수의 인자는 에러 객체가 들어옴 

// 비동기 연산에 순서와 절차를 부여하기 위해 axios를 쓰는 것 
// 반드시 앞의 then이 끝나야 다음이 진행되게끔 할 수 있다는 거임 
// then



    console.log('작업 마침 ')

    // 출력 순서가 result, 작업마침, then 메서드 실행
    // 비동기 요청임 
    // 요청을 보내고 응답이 와야 함
    // 자바스크립트는 요청을 보내놓고 응답을 안기다린거임
    // 다 처리되면 나중에 다시 델꼬온거야
    // axios의 then 과정들보다 먼저 출력됨
    // 왜냐면 axios는 서버로 비동기 요청을 보내는 것이기 때문에 
    // JS는 요청을 보내놓고 응답을 기다리지 않고 다음으로 넘어감 

    // 파이썬의 request의 요청이 axios와 같다고 생각하면 됨 
    // 근데 request는 동기적 요청임
    // 요청을 보내면 그 응답이 올 때까지 기다림 
    // 근데 자스의 axios는 비동기적 요청임
    // 그래서 요청을 보내놓고, 
    // 그 응답이 언제 올지 모르니깐 걍 넘겨두고 다음 코드로 진행해가는거임 
    













  </script>
</body>
</html>